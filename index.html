<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- TODO: Set the document title to the name of your application -->
    <title>Lovable App</title>
    <meta name="description" content="Lovable Generated Project" />
    <meta name="author" content="Lovable" />

    <!-- TODO: Update og:title to match your application name -->
    <meta property="og:title" content="Lovable App" />
    <meta property="og:description" content="Lovable Generated Project" />
    <meta property="og:type" content="website" />
    <meta property="og:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:site" content="@Lovable" />
    <meta name="twitter:image" content="https://lovable.dev/opengraph-image-p98pqg.png" />
  </head>

  <body>
    <div id="root"></div>
    <script>
      // Write OAuth tokens directly to localStorage in the format the Supabase
      // client expects, BEFORE any module loads. This avoids Web Locks AbortError.
      (function() {
        var h = window.location.hash;
        if (h && h.indexOf('access_token=') !== -1) {
          var p = new URLSearchParams(h.substring(1));
          var at = p.get('access_token');
          var rt = p.get('refresh_token');
          if (at && rt) {
            var ei = parseInt(p.get('expires_in') || '3600', 10);
            var ea = parseInt(p.get('expires_at') || '0', 10);
            if (!ea) ea = Math.floor(Date.now() / 1000) + ei;
            var tt = p.get('token_type') || 'bearer';
            var session = {
              access_token: at,
              refresh_token: rt,
              expires_in: ei,
              expires_at: ea,
              token_type: tt
            };
            localStorage.setItem('sb-wdvnesawgmaujdkfppad-auth-token', JSON.stringify(session));
            window.history.replaceState(null, '', window.location.pathname);
          }
        }
      })();
    </script>
    <script type="module" src="/src/main.tsx"></script>
  </body>
</html>
